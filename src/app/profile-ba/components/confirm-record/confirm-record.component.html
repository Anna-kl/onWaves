
<main>
  <!-- List start -->
  <div class="parent-grey-light">
    <div class="disp1 top170" >
      <div class="cont-horiz-start-start wrap768">
        <!--- Левая колонка --->
        <section class="left-ba-profile" *ngIf="businessProfile">
          <app-column-baprofile [id]="businessProfile.id!" >
          </app-column-baprofile>
        </section>
        <!-- Правая колонка start-->

        <section class="confirm-record-servise margin-bottom50" >

          <div class="cont-horiz-start">
            <div (click)="inBack()">
              <div class="btn-back"></div>
            </div>
            <h3>Подтвердить запись</h3>

          </div>
          <ng-template #notService>
            Вы не выбрали записей
          </ng-template>
          <div *ngIf="chooseServices.length > 0; else notService" >
            <div class="margin-top20 margin-bottom20 ">
              Проверьте, пожалуйста, данные записи
              <p>{{businessProfile?.name}}</p>
            </div>
            <div class="margin-bottom20 cont-horiz-start" *ngIf="record">
              <div class="margin-right10" *ngIf="record?.profile">
                <img [src]="getAvatar(record!.profile!.avatar)" style="width: 48px; height: 48px ; border-radius: 50px;" alt="">
              </div>
              <div *ngIf="record.clientId">
                <b>{{record.clientId}}</b>
              </div>
            </div>
            <!-- Запись на услугу Start -->
            <div class="cont-horiz-between chooseServices" *ngFor="let service of chooseServices" >
              <div class="cont-vert-start-center" >
                <!-- Название услуги -->
                <div style="margin-bottom: 10px;">
                  <b>{{service.name}}</b>
                </div>
                <!-- Дата начала услуги -->
                <div class="txt-gray-light">
                  {{dayChoose|date: 'd MMMM yyyy, HH:mm'}}
                </div>
              </div>
              <!-- Цена услуги -->
              <div class="txt-green-light">
                {{getPriceService(service.price)}}₽
              </div>
            </div>

            <div class="cont-vert-start-center" >
              <!-- Название услуги -->
              <div style="margin-bottom: 10px;">
                <b  *ngIf="getStrTime()">Общее время: {{getHours(duration)}}ч. {{getMinutes(duration)}}мин.</b>
                <b  *ngIf="getStrTime() === false">
                  Услуга без ограничения по времени</b>
              </div>
              <!-- Дата начала услуги -->
            </div>
            <!-- Цена услуги -->
            <div class="txt-green-light">
              Общая сумма: {{getPrice(chooseServices, sale)}}₽
            </div>

            <!-- Запись на услугу END -->

            <div class="margin-bottom20 margin-top20">
              <b>Возможные способы оплаты:</b>
            </div>

            <div class="cont-horiz-start wrap w100" style="gap: 10px 50px">
              <!-- Способ оплаты 1 -->
              <div class="cont-horiz-start type-of-pay" style="gap: 10px 10px"
                   *ngIf="checkPaymentMethods(PaymentMethodType.CASH)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.6013 4.59363L15.5982 4.59449L15.6013 4.59363ZM15.4319 4.638L8.29643 6.50053C7.86893 6.61212 7.43191 6.35602 7.32032 5.92852C7.20873 5.50101 7.46483 5.06399 7.89234 4.9524L15.1764 3.0511C15.3596 3.00076 15.5511 2.98743 15.7396 3.01193C15.9311 3.03683 16.1157 3.10029 16.282 3.19847C16.4484 3.29666 16.5932 3.42753 16.7076 3.5832C16.8205 3.73692 16.9016 3.91166 16.946 4.09713L17.3048 5.53244C17.4119 5.96107 17.1513 6.39542 16.7227 6.50258C16.2941 6.60974 15.8597 6.34913 15.7526 5.9205L15.4319 4.638Z" fill="#11142D"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.08571 8.14062C4.53255 8.14062 4.00204 8.36037 3.61089 8.75152C3.21974 9.14266 3 9.67317 3 10.2263V19.2263C3 19.7795 3.21974 20.31 3.61089 20.7012C4.00204 21.0923 4.53255 21.3121 5.08571 21.3121H17.3C17.8532 21.3121 18.3837 21.0923 18.7748 20.7012C19.166 20.31 19.3857 19.7795 19.3857 19.2263V16.8123H19.8715C20.6684 16.8123 21.3144 16.1663 21.3144 15.3695V13.4409C21.3144 12.644 20.6684 11.998 19.8715 11.998H19.3857V10.2263C19.3857 9.67317 19.166 9.14266 18.7748 8.75152C18.3837 8.36037 17.8532 8.14062 17.3 8.14062H5.08571ZM17.7857 11.998V10.2263C17.7857 10.0975 17.7345 9.97398 17.6435 9.88289C17.5524 9.7918 17.4288 9.74062 17.3 9.74062H5.08571C4.9569 9.74062 4.83335 9.7918 4.74226 9.88289C4.65117 9.97398 4.6 10.0975 4.6 10.2263V19.2263C4.6 19.3552 4.65117 19.4787 4.74226 19.5698C4.83335 19.6609 4.9569 19.7121 5.08571 19.7121H17.3C17.4288 19.7121 17.5524 19.6609 17.6435 19.5698C17.7345 19.4787 17.7857 19.3552 17.7857 19.2263V16.8123H16.6572C15.8603 16.8123 15.2144 16.1663 15.2144 15.3695V13.4409C15.2144 12.644 15.8603 11.998 16.6572 11.998H17.7857ZM18.607 15.2123C18.6 15.2121 18.5928 15.2121 18.5857 15.2121C18.5786 15.2121 18.5715 15.2121 18.5644 15.2123H16.8144V13.598H19.7144V15.2123H18.607Z" fill="#11142D"/>
                </svg>
                <div>
                  Наличными
                </div>
             
              </div>
                <div class="coupon-checkbox" *ngIf="coupon$|async as coupon">
                <input
                  type="checkbox"
                  id="useCoupon"
                  class="coupon-checkbox__input"
                  [(ngModel)]="useCoupon"  
                  (change)="uses(coupon)"
                />
                <label for="useCoupon" class="coupon-checkbox__label">
                  Использовать купон
                </label>
              </div>
              <!-- Способ оплаты 2 -->
              <div class="cont-horiz-start type-of-pay" style="gap: 10px 10px" *ngIf="checkPaymentMethods(PaymentMethodType.CARD)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M19.5992 4.69922H4.39922C3.19922 4.69922 2.19922 5.69922 2.19922 6.89922V17.1992C2.19922 18.3992 3.19922 19.3992 4.39922 19.3992H19.5992C20.7992 19.3992 21.7992 18.3992 21.7992 17.1992V6.89922C21.7992 5.69922 20.7992 4.69922 19.5992 4.69922ZM20.1992 17.0992C20.1992 17.3992 19.8992 17.6992 19.5992 17.6992H4.39922C4.09922 17.6992 3.79922 17.3992 3.79922 17.0992V11.0992H20.1992V17.0992ZM20.1992 9.49922H3.79922V6.89922C3.79922 6.59922 4.09922 6.29922 4.39922 6.29922H19.5992C19.8992 6.29922 20.1992 6.59922 20.1992 6.89922V9.49922Z" fill="#11142D"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.4992 15.9992H17.5992C17.9992 15.9992 18.3992 15.5992 18.3992 15.1992C18.3992 14.7992 17.9992 14.3992 17.5992 14.3992H15.4992C15.0992 14.3992 14.6992 14.7992 14.6992 15.1992C14.6992 15.5992 14.9992 15.9992 15.4992 15.9992Z" fill="#11142D"/>
                </svg>
                <div>
                  Картой
                </div>
              </div>
              <!-- Способ оплаты 3 -->
              <div class="cont-horiz-start type-of-pay" style="gap: 10px 10px" *ngIf="checkPaymentMethods(PaymentMethodType.ONLINE)">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="20" viewBox="0 0 14 20" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M2.33255 1.79922C2.06619 1.79922 1.79922 2.03223 1.79922 2.38383V17.6146C1.79922 17.9662 2.06619 18.1992 2.33255 18.1992H11.6659C11.9322 18.1992 12.1992 17.9662 12.1992 17.6146V2.38383C12.1992 2.03223 11.9322 1.79922 11.6659 1.79922H2.33255ZM0.199219 2.38383C0.199219 1.20603 1.12616 0.199219 2.33255 0.199219H11.6659C12.8723 0.199219 13.7992 1.20603 13.7992 2.38383V17.6146C13.7992 18.7924 12.8723 19.7992 11.6659 19.7992H2.33255C1.12616 19.7992 0.199219 18.7924 0.199219 17.6146V2.38383Z" fill="#11142D"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.19916 15.5377C5.19916 15.0958 5.55734 14.7377 5.99916 14.7377H7.99916C8.44099 14.7377 8.79916 15.0958 8.79916 15.5377C8.79916 15.9795 8.44099 16.3377 7.99916 16.3377H5.99916C5.55734 16.3377 5.19916 15.9795 5.19916 15.5377Z" fill="#11142D"/>
                </svg>
                <div>
                  Онлайн в приложении
                </div>
              </div>
              <!-- Способ оплаты 4 -->
              <div class="cont-horiz-start type-of-pay" style="gap: 10px 10px" *ngIf="checkPaymentMethods(PaymentMethodType.FAST_TRANSFER)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9992 16.9C11.5992 16.9 11.1992 17.3 11.1992 17.7V20.7C11.1992 21.1 11.5992 21.5 11.9992 21.5C12.3992 21.5 12.7992 21.1 12.7992 20.7V17.7C12.7992 17.3 12.3992 16.9 11.9992 16.9Z" fill="#11142D"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.9992 15.5C15.5992 15.5 15.1992 15.9 15.1992 16.3V19.3C15.1992 19.7 15.5992 20.1 15.9992 20.1C16.3992 20.1 16.7992 19.7 16.7992 19.3V16.3C16.7992 15.9 16.3992 15.5 15.9992 15.5Z" fill="#11142D"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99922 15.5C7.59922 15.5 7.19922 15.9 7.19922 16.3V19.3C7.19922 19.7 7.59922 20.1 7.99922 20.1C8.39922 20.1 8.79922 19.7 8.79922 19.3V16.3C8.79922 15.9 8.39922 15.5 7.99922 15.5Z" fill="#11142D"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M19.5992 2.5H4.39922C3.29922 2.5 2.19922 3.3 2.19922 4.5V12C2.19922 13.2 3.29922 14 4.39922 14H19.5992C20.6992 14 21.7992 13.2 21.7992 12V4.6C21.7992 3.4 20.6992 2.5 19.5992 2.5ZM7.19922 12.5H4.39922C3.99922 12.5 3.79922 12.2 3.79922 12V4.6C3.79922 4.4 3.99922 4.1 4.39922 4.1H7.19922V12.5ZM15.1992 12.5H8.79922V4.1H15.1992V12.5ZM20.1992 12.1C20.1992 12.3 19.9992 12.6 19.5992 12.6H16.7992V4.1H19.5992C19.9992 4.1 20.1992 4.4 20.1992 4.6V12.1Z" fill="#11142D"/>
                </svg>
                <div>
                  Перевод
                </div>
              </div>
            </div>

            <!-- Способы оплаты: End -->
            <div class="cont-horiz-around wrap768 margin-top50" style="gap: 20px 20px;">
              <!-- Время записи и Адрес БА -->
              <div class="cont-horiz" style="gap: 20px 20px;">
                <!-- Время записи -->
                <div class="cont-horiz" style="gap: 10px 10px;">
                  <img src="/assets/img/ba-edit/ico_calendar_pc_24.svg" alt="">
                  <div>
                    {{dayChoose|date: 'd MMMM yyyy, HH:mm'}}
                  </div>
                </div>
                <!-- Адрес БА -->
                <div class="cont-horiz" style="gap: 10px 10px;">
                  <img src="/assets/img/ba-edit/ico_location_pc_24.svg" alt="">
                  <div *ngIf="businessProfile">
                    {{getAddressProfile(businessProfile.address!)}}
                  </div>
                </div>
              </div>
              <!-- Напоминание о записи  НЕ УДАЛЯТЬ!!! после MVP добавить!
              <div class="cont-vert-start-center" style="gap: 20px 20px;"-->
                <!-- Напомнить за день
                <div class="cont-horiz" >
                  <input class="custom-checkbox"  [checked]="IsRemandDay" type="checkbox" id="remind_me_in_a_day">
                  <label for="remind_me_in_a_day">
                    Напомнить за день
                  </label>
                </div> -->
                <!-- Напомнить за 2 часа
                <div class="cont-horiz">
                  <input class="custom-checkbox" type="checkbox" id="remind_in_2_hours"
                        [checked]="IsRemandHours">
                  <label for="remind_in_2_hours">
                    Напомнить за 2 часа
                  </label>
                </div>
              </div>-->
            </div> 
<!--            <div class="cont-horiz">-->
<!--              <textarea id="story" [(ngModel)]="message" name="story" class="text-story cont-horiz-start-start" placeholder="Добавьте комментарий">-->
<!--              </textarea>-->
<!--            </div>--> 
            <!-- Добавьте комментарий   -->
            <div class="container-textarea">
                  <textarea
                    class="textarea-ba-profile" rows="5" cols="100"
                    name="story"
                    id="story"
                    placeholder="Добавьте комментарий"
                    maxlength="150"
                    (ngModelChange)="setAbout()"
                    [(ngModel)]="message">
                  </textarea>
                  <span class="textarea-count">{{message.length}}/150</span>
            </div> 
            <div class="w100 cont-horiz margin-bottom50" (click)="onConfirm()" *ngIf="!record">
              <div class="btn-green margin-left40 margin-right40" style="max-width: 200px;">
                Далее
              </div>
            </div>
            <div class="around_1024-beetween_large сommunication" *ngIf="getStatusConfirm()">
              <div class="cont-horiz-start w100" style="gap: 10px 10px ; max-width: 600px;">
                <div (click)="confirmRecord( 2)" class="btn-transparent stl-cancel">
                  <b>Отменить</b>
                </div>
                <div (click)="confirmRecord( 1)" class="btn-green w100" style="max-width: 320px;">
                  <b>Подтвердить</b>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div> <!--disp1 END-->
  </div> <!-- parent-grey-light END -->
  <!-- List END -->
</main> 