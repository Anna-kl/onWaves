<div class="row" style="margin-left: 5%; margin-right: 10px; 
justify-content: center; margin-top: 20px;">

    <div class="col-6" style="max-width: 450px; margin-bottom: 20px; min-width: 350px;"> 

      <!-- <div class="cont-horiz padding-top40 padding-bottom20"
      style="max-width:100%;" >
       <div class="chat-cont cont-vert" [ngClass]="btnProfile ? 'btn-recommend1' : 'btn-recommend3'"
      >Личные сообщения</div>
       <div class="cont-vert chat-cont" [ngClass]="!btnProfile ? 'btn-recommend1' : 'btn-recommend2'"
       >Бизнес аккаунт</div>
      
     </div> -->
     <div class="cont-horiz padding-bottom20 row">
      <div class="col-2">
        <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="50" height="50" fill="#E5E5E5"/>
          <rect width="640" height="1855" transform="translate(-15 -144)" fill="#FAFAFC"/>
          <rect width="300" height="537" transform="translate(0 -60)" fill="white"/>
          <rect width="50" height="50" rx="25" fill="#006174"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M18.5692 16.6C18.4142 16.6 18.2655 16.6616 18.1559 16.7712C18.0462 16.8809 17.9846 17.0296 17.9846 17.1846V29.6462C17.9846 29.7321 17.9708 29.8176 17.9436 29.8991L17.0198 32.6704L21.1444 31.6393C21.2079 31.6234 21.2731 31.6154 21.3385 31.6154H32.4154C32.5704 31.6154 32.7192 31.5538 32.8288 31.4442C32.9384 31.3345 33 31.1858 33 31.0308V24.1077C33 23.6659 33.3582 23.3077 33.8 23.3077C34.2418 23.3077 34.6 23.6659 34.6 24.1077V31.0308C34.6 31.6102 34.3699 32.1658 33.9602 32.5755C33.5505 32.9852 32.9948 33.2154 32.4154 33.2154H21.437L15.994 34.5761C15.7108 34.6469 15.4114 34.5578 15.213 34.3436C15.0146 34.1293 14.9487 33.824 15.0411 33.547L16.3846 29.5163V17.1846C16.3846 16.6052 16.6148 16.0496 17.0245 15.6399C17.4342 15.2302 17.9899 15 18.5692 15H25.4923C25.9342 15 26.2923 15.3582 26.2923 15.8C26.2923 16.2418 25.9342 16.6 25.4923 16.6H18.5692Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M30.7584 16.7812C30.6812 16.7812 30.6048 16.7965 30.5336 16.8262C30.4623 16.8558 30.3977 16.8993 30.3433 16.9541L30.3398 16.9577L23.9736 23.297L23.507 26.1335L26.2983 25.6311L32.6423 19.2601L32.6458 19.2566C32.7006 19.2023 32.7441 19.1376 32.7738 19.0664C32.8035 18.9951 32.8187 18.9187 32.8187 18.8415C32.8187 18.7644 32.8035 18.6879 32.7738 18.6167C32.7441 18.5455 32.7006 18.4808 32.6458 18.4264L32.6435 18.4241L31.1758 16.9564L31.1735 16.9541C31.1191 16.8993 31.0545 16.8558 30.9832 16.8262C30.912 16.7965 30.8356 16.7812 30.7584 16.7812ZM29.9183 15.3492C30.1845 15.2383 30.47 15.1812 30.7584 15.1812C31.0468 15.1812 31.3323 15.2383 31.5986 15.3492C31.8642 15.4599 32.1054 15.6219 32.3082 15.8261C32.3086 15.8265 32.309 15.827 32.3095 15.8274L33.7725 17.2904C33.773 17.2909 33.7734 17.2913 33.7739 17.2918C33.978 17.4946 34.1401 17.7357 34.2507 18.0014C34.3616 18.2676 34.4187 18.5531 34.4187 18.8415C34.4187 19.1299 34.3616 19.4155 34.2507 19.6817C34.1402 19.9471 33.9783 20.188 33.7745 20.3907L27.2545 26.9383C27.139 27.0544 26.9906 27.1322 26.8294 27.1612L22.6755 27.9089C22.4197 27.9549 22.1575 27.8738 21.9724 27.6915C21.7872 27.5091 21.7022 27.2481 21.7444 26.9917L22.4367 22.7825C22.464 22.6168 22.5426 22.4639 22.6616 22.3454L29.2093 15.8254C29.412 15.6216 29.6529 15.4598 29.9183 15.3492Z" fill="white"/>
          </svg>
          
          
      </div>
      <div class="col-10">
        <div class="search-line " style="flex: 1; min-width: 220px;" >
          <div class="cont-horiz-between search-line-in">
          
            <input type="text" size="11"  placeholder="Что вы ищете?" style="border:0px;" >
         
            <div  class="round30 ico-background-green">
              <svg  width="24" height="24" fill="none">
                <path  class="svg-ico1" fill-rule="evenodd" d="M4.6 10.723a6.123 6.123 0 1 1 12.246 0 6.123 6.123 0 0 1-12.246 0ZM10.723 3a7.723 7.723 0 1 0 4.866 13.72l4.009 4.01a.8.8 0 0 0 1.131-1.132l-4.008-4.009A7.723 7.723 0 0 0 10.723 3Z" clip-rule="evenodd"/>
              
              </svg>
            </div>
          </div>
        </div> 
      </div>
     </div>


     <div class="row border" *ngIf="isNewChat && newChat">
      <div class="col-3" style="padding: 2px;">
        <img [src]="getAvatar(newChat, false)" class="avatar-ba"
        style="width: 50px!important;" />
        <!-- <svg width="80" height="80" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M47.4968 24.5C47.4968 37.7548 36.8643 48.5 23.7484 48.5C10.6325 48.5 0 37.7548 0 24.5C0 11.2452 10.6325 0.5 23.7484 0.5C36.8643 0.5 47.4968 11.2452 47.4968 24.5ZM41.5599 24.5C41.5599 34.4411 33.5855 42.5 23.7486 42.5C13.9116 42.5 5.93725 34.4411 5.93725 24.5C5.93725 14.5589 13.9116 6.5 23.7486 6.5C33.5855 6.5 41.5599 14.5589 41.5599 24.5Z" fill="$green-basic"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M31.1697 13.2752C28.9729 11.7918 26.3902 11 23.7481 11C20.2052 11 16.8075 12.4223 14.3023 14.9541C11.7971 17.4858 10.3896 20.9196 10.3896 24.5C10.3896 27.17 11.1731 29.7801 12.641 32.0002C14.1088 34.2203 16.1951 35.9506 18.6361 36.9724C21.077 37.9942 23.763 38.2615 26.3542 37.7406C28.9455 37.2197 31.3258 35.9339 33.194 34.0459C33.3697 33.8684 33.5401 33.6863 33.7051 33.4999H23.7483C22.5853 33.4999 21.4277 33.2696 20.3427 32.8158C18.715 32.135 17.3237 30.9817 16.3447 29.5017C15.3657 28.0217 14.843 26.2816 14.8427 24.5013C14.8423 22.1152 15.7796 19.8265 17.4485 18.1385C19.1175 16.4505 21.3814 15.5014 23.7425 15.4999L23.7483 15.4999H23.7486H33.7049C32.9597 14.6579 32.109 13.9094 31.1697 13.2752Z" fill="$green-basic"/>
          <ellipse cx="31.1695" cy="24.5" rx="5.9371" ry="6" fill="#11142D"/>
          </svg>           -->
      </div>
      <div class="col-8" style="padding:0; margin-top: 15px;">
        <div class="row" style="width: Fill (199px)px; height: Hug (21px)px;gap: 10px; opacity: 0px; ">
          <h3 class="col-8" style="padding: 0; font-size: 16px; font-weight: 700;
            line-height: 20.8px;  text-align: left;">{{newChat.nameReceiver}}</h3>
          <span class="col-2" ></span>
        </div>
        <div class="row" style="margin-top: 15px; width: Fill (199px)px; height: Hug (21px)px;gap: 10px; opacity: 0px; ">
          <!-- <p class="col-8" style="font-size: 14px;  font-weight: 400; line-height: 18.2px; text-align: left; ">Текст сообщения</p>
          <div class="round-number col-1" style="margin-left: 15px;padding-left: 5px;">2</div> -->
        </div>
      </div>
      </div>
    

     <div class="row" [ngClass]="chat.receiverId === receiverId ? 'border-active' : 'border-noactive'" *ngFor="let chat of chats$|async as chats" 
     (click)="loadMessages(chat)">
      <div class="col-3" style="padding: 2px;">
        <img [src]="getAvatar(chat, true)" class="avatar-ba"
        style="width: 80px!important;" />
        <!-- <svg width="80" height="80" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M47.4968 24.5C47.4968 37.7548 36.8643 48.5 23.7484 48.5C10.6325 48.5 0 37.7548 0 24.5C0 11.2452 10.6325 0.5 23.7484 0.5C36.8643 0.5 47.4968 11.2452 47.4968 24.5ZM41.5599 24.5C41.5599 34.4411 33.5855 42.5 23.7486 42.5C13.9116 42.5 5.93725 34.4411 5.93725 24.5C5.93725 14.5589 13.9116 6.5 23.7486 6.5C33.5855 6.5 41.5599 14.5589 41.5599 24.5Z" fill="$green-basic"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M31.1697 13.2752C28.9729 11.7918 26.3902 11 23.7481 11C20.2052 11 16.8075 12.4223 14.3023 14.9541C11.7971 17.4858 10.3896 20.9196 10.3896 24.5C10.3896 27.17 11.1731 29.7801 12.641 32.0002C14.1088 34.2203 16.1951 35.9506 18.6361 36.9724C21.077 37.9942 23.763 38.2615 26.3542 37.7406C28.9455 37.2197 31.3258 35.9339 33.194 34.0459C33.3697 33.8684 33.5401 33.6863 33.7051 33.4999H23.7483C22.5853 33.4999 21.4277 33.2696 20.3427 32.8158C18.715 32.135 17.3237 30.9817 16.3447 29.5017C15.3657 28.0217 14.843 26.2816 14.8427 24.5013C14.8423 22.1152 15.7796 19.8265 17.4485 18.1385C19.1175 16.4505 21.3814 15.5014 23.7425 15.4999L23.7483 15.4999H23.7486H33.7049C32.9597 14.6579 32.109 13.9094 31.1697 13.2752Z" fill="$green-basic"/>
          <ellipse cx="31.1695" cy="24.5" rx="5.9371" ry="6" fill="#11142D"/>
          </svg>           -->
      </div>
      <div class="col-8" style="padding:0; margin-top: 15px;">
        <div class="row" style="    width: 100%; margin-left: 2%;gap: 10px; opacity: 0px; ">
          <h3 class="col-8" style="padding: 0; font-size: 16px; font-weight: 700;
            line-height: 20.8px;  text-align: left;">{{chat.nameReceiver}}</h3>
          <span class="col-2" >{{toLocaleTime(chat.lastDateTimeMessage!)|date: 'HH:MM': 'ru-RU'}}</span>
        </div>
        <div class="row" style="margin-top: 15px;     width: 100%; margin-left: 2%;gap: 10px; opacity: 0px; ">
          <p class="col-8" style="font-size: 14px;  font-weight: 400; line-height: 18.2px; text-align: left; ">
            {{getTextFromMessage(chat)}}</p>
          <!-- <div class="round-number col-1" style="margin-left: 15px;padding-left: 5px;">2</div> -->
        </div>
      </div>
      </div>
    </div>
    
    <div class="col card container" style="max-width: 795px; 
     min-width: 350px; max-height: 850px;" 
   >
   <div class="container-fluid" style="overflow-y: auto; max-height: 650px;
   height: 100vh;" >
   <div *ngFor="let message of messages" style="margin-top:10px">
        <div class="row justify-content-center" 
        *ngIf="checkShowDate(message, message.dateCreate|date:'fullDate')">
          <p style="display: flex; justify-content: center;font-family: Montserrat;font-size: 16px;font-weight: 400;
        line-height: 20.8px;text-align: center; color:#9196A4">
        {{message.dateCreate|date:'fullDate'}}</p></div>
      <div class="row ">
        <div class="col-2" style="margin-left: 10px;">
          <div style="justify-content: end; display: flex;">
            <img [src]="getAvatarMessage(message)"
            *ngIf="message.showAvatar" class="avatar-ba" style="width: 50px;" alt="">
              <!-- Тип профиля ico-user -->
          </div> 
        </div>
        <div class="col-10 card justify-content-start" 
        style="width: 400px;  border-radius: 12px;padding:20px;gap: 10px"
        [style.background]="message.receiverId === profile!.id! ? '#E1F5DE' : 'white'">
            <p>{{message.text}}</p>
            <span style="justify-content: end; display: flex;">{{toLocaleTime(message.dateCreate)|date: 'HH:MM': 'ru-RU'}}</span>
          </div>
        </div>
      </div>
    </div>
        <div class="row" 
        style="height:90px; width:100%; margin-left: 0!important; border: 0px, 0px, 1px, 0px;padding:20px; margin-top:60px;
        bottom: 0; position: absolute;
        gap:16px; background-color: $green-basic;">
  <div class="search-line  col-10" style="max-width: 620px;" >
    <div class="search-line-in col-11" style="padding-top: 10px!important; padding-left: 0;">
  <!-- Строка ввода -->
  <input type="text" size="11"  placeholder="Введите сообщение"
  [(ngModel)]="textMessage" style="border:0px;" >
  </div>
  </div>
  <!-- Иконка Лупы -->
  <div  class="col-1 " style="padding: 0!important; margin: 0!important;"
  (click)="sendMessage()">
    <svg width="60" style="padding-bottom: 6px;" height="60" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="25" cy="25" r="25" fill="#409B89"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M31.8271 16.1245C33.2828 15.5646 34.7132 16.995 34.1533 18.4507L28.5098 33.1239C27.9367 34.6138 25.8517 34.6758 25.1911 33.2226L22.6486 27.6292L17.0552 25.0867C15.602 24.4262 15.664 22.3411 17.1539 21.768L31.8271 16.1245ZM32.6599 17.8763C32.7222 17.7146 32.5632 17.5557 32.4015 17.6179L17.7283 23.2614C17.5627 23.3251 17.5559 23.5567 17.7173 23.6301L23.5838 26.2967C23.7599 26.3768 23.901 26.5179 23.9811 26.694L26.6477 32.5605C26.7211 32.722 26.9527 32.7151 27.0164 32.5495L32.6599 17.8763Z" fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M28.2031 22.0748C28.5155 22.3872 28.5155 22.8938 28.2031 23.2062L23.8185 27.5908C23.506 27.9032 22.9995 27.9032 22.6871 27.5908C22.3747 27.2784 22.3747 26.7719 22.6871 26.4594L27.0717 22.0748C27.3841 21.7624 27.8907 21.7624 28.2031 22.0748Z" fill="white"/>
      </svg>
      
  </div>
        </div>
      </div>
    </div>
   



