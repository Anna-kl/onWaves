<!--Услуги start-->
<div class="cont-horiz-start wrap " style="max-width: 1200px;">
    <div style="display: flex; flex-direction: column;" >
        <h2 class="head-servise">
            Список услуг
        </h2>
<span *ngIf="!ifExist"> Услуги отсутствуют на данный момент</span>
           
        <!-- </p>  -->
    </div>


<ng-container >
       <app-create-accordion *ngIf="viewCreate"></app-create-accordion> 

        <div class="accordion_tab" *ngFor="let group of combinedData$|async as groupsCombined" style="max-height: 100%;">
            <!-- Шапка вкладки -->
            <input type="checkbox" id="chck{{group.group.id}}" [checked]="group.isOpen"
                (change)="group.isOpen = !group.isOpen">
            <label class="accordion_tab-label" for="chck{{group.group.id}}">
                <div class="cont-horiz-between w100">
                    <!-- Название Группы -->
                    <div class="group-name">
                        {{ group.group.name }}
                    </div>
                    <!-- Содержимое группы - зеленое поле -->
                    <label class="tooltip " *ngIf="isUpdate">
                        <!-- Объект на которы вызываем всплывающее окно -->
                        <div class="cebab1 horiz-vert">
                            <div class="round-cebab-white"></div>
                            <div class="round-cebab-white"></div>
                            <div class="round-cebab-white"></div>
                        </div>
                        <!-- Объект на которы вызыаем всплывающее окно end -->
                        <input type="checkbox" [id]="group.group.id">
                        <!-- Cодержимое Модального окно -->
                        <span class="cont-vert" *ngIf="isUpdate">
                            <!-- подкатегория 1 -->
                            <div class="modal_chng_group cont-vert-around-left" style="gap: 20px 20px;">
                                <h2>{{ group.group.name }}</h2>
                                <a (click)="changeGroupService(group.group)">
                                    Изменить название
                                </a>
                                <a (click)="deleteGroup(group.group)">
                                    Удалить
                                </a>
                            </div>
                        </span>
                        <!-- Cодержимое Модального окно end -->
                    </label>
                    <!-- Содержимое группы end - зеленое поле -->
                </div>
            </label>
            <!-- Шапка вкладки End -->
            <!-- Содержимое вкладки -->
            <div class="accordion_tab-content" [class.open]="group.isOpen">
                <div class="accordion_serv_in_tabs" *ngFor="let subGroup of group.subGroups">
                    <!-- вкладка 2 -->
                    <div class="accordion_serv_in_tab">
                        <input type="checkbox" id="{{subGroup.id}}">
                        <!-- Шапка вкладки -->
                        <label class="accordion_serv_in_tab-label" for="{{subGroup.id}}">
                            <div class="cont-vert-start-start w100" style="gap: 5px 5px;">
                                <div class="cont-horiz-between-end w100">
                                    <!-- Название услуги и Длительность услуги -->
                                    <div class="cont-horiz-between w100">
                                        <div class="cont-vert-start" style="gap: 5px 5px;">
                                            <!-- Название услуги -->
                                            <div>
                                                {{subGroup.name}}
                                            </div>
                                            <!-- Длительность услуги -->
                                            <div class="txt-uslugi-time" *ngIf="isWriteTime(subGroup)">
                                                {{getHours(subGroup.duration!)}} ч.
                                                {{getMinutes(subGroup.duration!)}}
                                                мин.
                                            </div>
                                            <div class="txt-uslugi-time" *ngIf="subGroup.isTimeUnlimited">
                                                Без ограничений по времени
                                            </div>
                                            <div class="cont-horiz-around">
                                                <!-- Цена услуги -->
                                                <div class="cont-horiz-start margin-right10">
                                                    {{getPrice(subGroup.price)}}руб.
                                                    <!--  (заглушка валюта должна меняться) -->
                                                </div>
                                            </div>
                                            <!-- Тип услуги -->
                                            <div class="txt-uslugi-time">
                                                {{getDescribeTypePayment(subGroup)}}
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Модальное окно + checkbox -->
                                    <div class="txt-uslugi-price cont-horiz" *ngIf="canSetService">
                                        <!-- checkbox -->
                                        <!-- (ngModelChange)="updateCheckboxState($event)" -->
                                        <div>
                                            <input type="checkbox" [(ngModel)]="subGroup.isChecked"
                                                class="custom-checkbox" (ngModelChange)="setService(subGroup)"
                                                *ngIf="!isUpdate">
                                        </div>
                                        <!-- Модальное окно -->
                                        <label class="tooltip " *ngIf="isUpdate">
                                            <!-- Объект на которы вызываем всплывающее окно -->
                                            <div class="cebab1 horiz-vert">
                                                <div class="round-cebab-gray"></div>
                                                <div class="round-cebab-gray"></div>
                                                <div class="round-cebab-gray"></div>
                                            </div>
                                            <!-- Объект на которы вызыаем всплывающее окно end -->
                                            <input type="checkbox">
                                            <!-- Cодержимое Модального окно -->
                                            <span class="cont-vert">
                                                <!-- подкатегория 1 -->
                                                <div class="modal_chng_service cont-vert-around-left"
                                                    style="gap: 20px 20px;">
                                                    <h2> {{subGroup.name}} </h2>
                                                    <a (click)="changeService(subGroup)">
                                                        Изменить услугу
                                                    </a>
                                                    <a (click)="changeGroup(subGroup)">
                                                        Сменить группу
                                                    </a>
                                                    <a (click)="deleteService(subGroup)">
                                                        Удалить
                                                    </a>
                                                </div>
                                            </span>
                                            <!-- Cодержимое Модального окно end -->
                                        </label>
                                        <!-- Модальное окно end -->
                                    </div><!-- txt-uslugi-price -->
                                </div>
                            </div>
                        </label>
                        <!-- Шапка вкладки end -->
                        <!-- Описание услуги -->
                        <div class="accordion_serv_in_tab-content" *ngIf="subGroup.about; else notHaveAbout" [style.max-height.%]="isAboutOpen ? 100 : 0">
                            <span>
                                {{subGroup.about}}
                            </span>
                            <!-- фото услуги -->
                            <!--                        <div class="cont-horiz-start-start wrap w100 margin-top20">-->
                            <!--                            <div class="card-albom-ba-foto"  *ngFor="let image of subGroup.images">-->
                            <!--                                <img [src]="getImage(image.image)" class="edit-ba-gallery-foto"  alt="">-->
                            <!--                            </div>-->
                            <!--                        </div>-->
                        </div>
                        <ng-template #notHaveAbout>
                            <div class="accordion_serv_in_tab-content">
                                <span><i>описания услуги еще не добавлено</i></span>
                            </div>
                        </ng-template>
                    </div>
                </div>
                <!-- ----------------- -->
            </div><!-- Содержимое вкладки end -->
        </div>


        <!------------------------      Услуги без группы   ----------------------->
     

         
            <div class="line-separateur"></div>
            <!--      Услуги без группы-->
            <div class="accordion_serv_in_tabs w100  cont-horiz-start wrap" *ngIf="serviceWithout$|async as serviceWithout">
                <div class="accordion_serv_in_tab w100" *ngFor="let service of serviceWithout">
           
                    <input type="checkbox" id="{{service.id}}">
                    <!-- Шапка вкладки -->
                    <label for="{{service.id}}" class="w100 accordion_serv_in_tab-label str_uslugi_podcategory w100"
                        style="padding: 20px;">
                        <div class="cont-vert-start-start w100" style="gap: 5px 5px;">
                            <div class="cont-horiz-between-end w100">
                                <!-- Название услуги и Длительность услуги -->
                                <div class="cont-horiz-between w100">
                                    <!-- Название услуги и Длительность услуги -->
                                    <div class="cont-vert-start" style="gap: 5px 5px;">
                                        <!-- Название услуги -->
                                        <div>
                                            {{service.name}}
                                        </div>
                                        <!-- Длительность услуги -->
                                        <div class="txt-uslugi-time" *ngIf="isWriteTime(service)">
                                            {{getHours(service.duration!)}}ч. {{getMinutes(service.duration!)}} мин.
                                        </div>
                                        <div class="txt-uslugi-time" *ngIf="service.isTimeUnlimited">
                                            Без ограничений по времени
                                        </div>
                                        <!-- Оплата за услугу -->
                                        <div class="txt-uslugi-time">
                                            {{getDescribeTypePayment(service)}}
                                        </div>
                                    </div>
                                </div>
                                <!-- Цена услуги + Модальное окно + checkbox -->
                                <div class="txt-uslugi-price cont-horiz">
                                    <!-- checkbox -->
                                    <div>
                                        <!-- <input type="checkbox" class="custom-checkbox" [(ngModel)]="service.isChecked "
                                (ngModelChange)="setService(service)" *ngIf="!isUpdate&&canSetService"> -->
                                        <input type="checkbox" class="custom-checkbox" [(ngModel)]="service.isChecked"
                                            (ngModelChange)="setService(service)" *ngIf="!isUpdate && canSetService">
                                    </div>

                                    <!-- Модальное окно -->
                                    <label class="tooltip " *ngIf="isUpdate">
                                        <!-- Объект на которы вызываем всплывающее окно -->
                                        <div class="cebab1 horiz-vert">
                                            <div class="round-cebab-gray"></div>
                                            <div class="round-cebab-gray"></div>
                                            <div class="round-cebab-gray"></div>
                                        </div>
                                        <!-- Объект на которы вызыаем всплывающее окно end -->
                                        <input type="checkbox">
                                        <!-- Cодержимое Модального окно -->
                                        <span class="cont-vert">
                                            <!-- подкатегория 1 -->
                                            <div class="modal_chng_service cont-vert-around-left"
                                                style="gap: 20px 20px;">
                                                <h2>{{service.name}}</h2>
                                                <a (click)="changeService(service)">
                                                    Изменить услугу
                                                </a>
                                                <a (click)="changeGroup(service)">
                                                    Сменить группу
                                                </a>
                                                <a (click)="deleteService(service)">
                                                    Удалить
                                                </a>
                                            </div>
                                        </span>
                                        <!-- Cодержимое Модального окно end -->
                                    </label>
                                    <!-- Модальное окно end -->
                                </div><!-- txt-uslugi-price -->
                            </div>
                            <div class="cont-horiz-start" style="background-color: #fff;"> <!-- Цена услуги -->
                                <div class="price-group-uslygi margin-right20">
                                    {{getPrice(service.price)}} руб. <!-- (заглушка валюта должна меняться)-->
                                </div>
                            </div>
                        </div>
                    </label>
                    <!-- Описание -->
                    <div class="accordion_serv_in_tab-content" *ngIf="service.about; else notHaveAbout" [style.max-height.%]="isAboutOpen ? 100 : 0">
                        <span>
                            {{service.about}}
                        </span>
                        <!-- фото 1 -->
                        <div class="cont-vert-start-start">
                            <div class="card-albom-ba-foto" *ngFor="let image of service.images">
                                <img [src]="getImage(image.image)" class="edit-ba-gallery-foto" alt="">
                            </div>
                        </div>
                    </div>
                    <ng-template #notHaveAbout>
                        <div class="accordion_serv_in_tab-content">
                            <span><i>описания услуги еще не добавлено</i></span>
                        </div>
                    </ng-template>
                </div>
            </div>

 </ng-container>
        <p-toast position="bottom-center">
        </p-toast>
